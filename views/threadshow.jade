extends layout

block content
  script.
    function showScoreBJCP(newValue){
      document.getElementById("scoreBJCP").innerHTML=newValue;
    }
    function showScore(newValue){
      document.getElementById("score").innerHTML=newValue;
    }
    //var date = new Date(#{created_at});
    //var dateString = date.getFullYear()+"/"+date.getMonth()+"/"+date.getDate()+" "+date.getHours()+":"+date.getMinutes()+":"+date.getSeconds();
    //document.getElementById("startDate").innerHTML = dateString;

  h1= title
  div(style="border-width:3px;border-style:dashed;border-color:#FFAC55;padding:5px;min-height:190px;")
    img(src="#{qrcode}", style="width:175px; float:left;")
    span(style="display:inline; white-space: pre-line; word-break: break-all; width:400px;")
      b= title
      br
      i by #{nickname}, #{created_at}
      br
      i= style
      br
      span= ownerSaid
  p(style="clear:left") å¹³å‡è©•åˆ†ï¼š#{avgScore} BJCPå¹³å‡ï¼š#{avgScoreBJCP}
  p Tagsï¼š#{tags}
  p 
    | é»æ­¤åˆ—å°æ¨™ç±¤ï¼Š
    a(href="/thread/#{_id}/printA4Detail") A4å¸¶èªªæ˜
    | ï¼Š
    a(href="/thread/#{_id}/printA4QRCode") A4ç´”æ¢ç¢¼
  p é…’è­œï¼š
  textarea(type="text", style="width:800px;height:100px;") #{recipe} 
  p
    img(src="#{image_url}", style="max-width:800px;max-height:600px;")
  hr
  p ç•™ä¸‹ä½ çš„æ„Ÿæƒ³
  form(action='/thread/#{_id}/comment', method="post")
    div(style="border-width:2px;border-style:solid;border-color:#FFAC55;padding:5px;margin:3px;").input
      | æ‚¨çš„ä»£è™Ÿ 
      input(type="text", name="nickname", style="margin:3px;") 
      br
      | æƒ³æ³•èˆ‡åé¥‹
      textarea(type="text", name="response", style="width:800px;height:200px;") #{defaultResponse}
      br
      | BJCPè©•é‡ï¼š
      span(id="scoreBJCP") ğŸ±
      | ï¼ˆ-1ä¸è¨ˆå…¥è¨ˆç®—ï¼Œ50-45å“è¶Šã€44-38å‚‘å‡ºã€37-30å„ªè‰¯ã€29-21å¥½ã€20-14å°šå¯ã€13-0ä¸ä½³)
      br
      | -1
      input(type="range", name="scoreBJCP", min="-1", max="50", value="-1", onchange="showScoreBJCP(this.value)", )
      | 50
      br
      | ç¸½é«”è©•é‡(æ»¿åˆ†100): 
      span(id="score") ğŸ±
      br
      | 0
      input(type="range", name="score", min="0", max="100", value="80", onchange="showScore(this.value)")
      | 100
      br
      | BJCPå¯†ç¢¼ï¼ˆé¸å¡«ï¼Œè‹¥æ‚¨æœ‰BJCPèº«ä»½ä¸”é¡˜æ„æä¾›å°ˆæ¥­è©•é‡ï¼Œè«‹èˆ‡æˆ‘å€‘è¯ç¹«ï¼‰
      input(type="password", name="bjcppass")
      br
      | è¯çµ¡æ–¹å¼ï¼ˆé¸å¡«ï¼‰
      input(type="text", name="email")
    div.actions
      input(type="submit", value="é€å‡º")

  if (typeof(comments) != 'undefined' && comments!=null)
    h3 å·²ç¶“æŠ•ç¨¿çš„å›è¦†
    for com in comments
      if (com.bjcppass)
        div(style="border-width:2px;border-style:solid;border-color:#FFD700;padding:5px;margin:3px;").comment
          p è©•å¯©è¬›è©•
          p
            if (typeof(com.email) != 'undefined' && com.email!="")
              a(href="mailto:#{com.email}") #{com.nickname}
            else
              | #{com.nickname}
            | ï¼šScore #{com.score}
            if (com.scoreBJCP!=-1)
              | / BJCP #{com.scoreBJCP}
          p
            pre= com.response
      else
        div(style="border-width:2px;border-style:solid;border-color:#000000;padding:5px;margin:3px;").comment
          p
            if (typeof(com.email) != 'undefined' && com.email!="")
              a(href="mailto:#{com.email}") #{com.nickname}
            else
              | #{com.nickname}
            | ï¼šScore #{com.score}
            if (com.scoreBJCP!=-1)
              | / BJCP #{com.scoreBJCP}
          p
            pre= com.response

  p æ­¡è¿ä¾† #{siteTitle} ï¼Œä½ å¯ä»¥å¿«é€Ÿåœ°å»ºç«‹ä¸€å€‹è¡¨å–®ä¾†æ¥æ”¶å¤§å®¶çš„å›æ‡‰ï¼Œä½¿ç”¨ç¶²å€æˆ–æ˜¯QRCodeå¿«é€Ÿåœ°å‚³éçµ¦ä½ çš„æœ‹å‹å€‘ã€‚
